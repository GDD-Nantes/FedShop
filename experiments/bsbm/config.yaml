generation:
  workdir: "experiments/bsbm"
  n_batch: 10
  n_query_instances: 10
  n_federation_members: "${sum: ${generation.schema.vendor.params.vendor_n}, ${generation.schema.ratingsite.params.ratingsite_n}}" 
  verbose: true
  stats:
    confidence_level: 0.90
  generator: 
    #exec: "docker exec watdiv watdiv"
    exec: "watdiv"
    endpoint: "http://localhost:8000"
    compose-file: "${generation.workdir}/docker-compose-generator.yml"
    container-name: "bsbm-watdiv"
  sparql:
    endpoint: "http://localhost:8890/sparql"
    compose-file: "${generation.workdir}/docker-compose-sparql.yml"
    container-name: "bsbm-virtuoso"
  schema:
    # Configuration for ONE batch
    product:
      # Products are generated once, independant from vendor and person
      template: "${generation.workdir}/model/watdiv/bsbm-product.template"
      scale_factor: 1
      export_output_dir: "${generation.workdir}/model/tmp/product"
      params:
        # type
        product_n: 200000
        producer_n: "${normal_dist: 3, 1, 50}"
        feature_n: 50
        prod_type: "${product_type_per_product: ${generation.schema.product.params.product_n}}"
        # pgroup
        productPropertyTextual4_p: 0.7
        productPropertyTextual5_p: 0.8
        productPropertyNumeric4_p: 0.7
        productPropertyNumeric5_p: 0.8

    vendor:
      template: "${generation.workdir}/model/watdiv/bsbm-vendor.template"
      export_output_dir: "${generation.workdir}/model/dataset"
      export_dep_output_dir: "${generation.schema.product.export_output_dir}"
      scale_factor: 1
      params:
        vendor_n: "${multiply: 10, ${generation.n_batch}}"
        offer_n: "${normal_dist: 3, 1, 2000}" # specs: 100 productsVendorsRatio * 20 avgOffersPerProduct, ref: bsbmtools
        product_n: "${generation.schema.product.params.product_n}"

    ratingsite:
      template: "${generation.workdir}/model/watdiv/bsbm-ratingsite.template"
      export_output_dir: "${generation.workdir}/model/dataset"
      export_dep_output_dir: "${generation.schema.product.export_output_dir}"
      scale_factor: 1
      params:
        #type
        ratingsite_n: "${multiply: 10, ${generation.n_batch}}"
        product_n: "${generation.schema.product.params.product_n}"
        review_n: "${normal_dist: 3, 1, 10000}" # specs: 10000
        person_n: "${divide: ${generation.schema.ratingsite.params.review_n}, 20}"

        #pgroup
        rating1_p: 0.7
        rating2_p: 0.7
        rating3_p: 0.7
        rating4_p: 0.7

evaluation:
  engines:
    fedx:
      dir: "Federapp/target"
      timeout: 10